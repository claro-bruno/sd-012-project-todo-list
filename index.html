<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project to do list</title>
    <link rel="stylesheet" href="style.css">
    <style>
    .selected {
        background-color: rgb(128,128,128);
    }
    </style>
</head>
<body>
    <header>Minha Lista de Tarefas</header>
    <p id="funcionamento">Clique duas vezes em um item para marc√°-lo como completo</p>
    <input value="" type="text" id="texto-tarefa">
    <ol id="lista-tarefas"></ol>
    <button id="criar-tarefa">Create</button>

    <script href='script.js'>
        function buttonClick () {
    let getButton = document.querySelector('#criar-tarefa');
    let getUL = document.querySelector('#lista-tarefas');

    getButton.addEventListener('click', function() {
        let newListItem = document.createElement('li');
        let getInput = document.getElementById('texto-tarefa');

        newListItem.innerHTML = getInput.value;
        newListItem.id = 'list-item'
        getUL.appendChild(newListItem);

        getInput.value = '';

        highlightText();
    })
}

buttonClick();

function highlightText () {
let getListItem = document.querySelectorAll('#list-item');
let newBgColor = 'rgb(128,128,128)';

    for (let index = 0; index < getListItem.length; index += 1) {
    getListItem[index].addEventListener('click', function(event) {
        if (event.target.style.backgroundColor !== newBgColor) {
            removeTudo();
            event.target.className = 'selected';

        }        
            })
          
    }
}

function removeTudo() {
    let getSelected = document.querySelectorAll('.selected');

    for (let key = 0; key < getSelected.length; key += 1) {
        let aRemover = getSelected[key];

        aRemover.classList.remove('selected');
    }

}


    </script>
</body>
</html>